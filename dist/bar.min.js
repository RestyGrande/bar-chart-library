"use strict";function Barchart(a,b,c,d){const e=this;e.configureChart(a,b,c,d),e.performPreOperations(),e.drawChart(),console.log(e)}Barchart.prototype.configureChart=function(a,b,c,d){const e=this;e.setCanvasParameters(a,b,c,d),e.setChartParameters()},Barchart.prototype.setCanvasParameters=function(a,b,c,d){const e=this;e.id=a,e.width=b,e.height=c,e.data=d},Barchart.prototype.setChartParameters=function(){const a=this;a.axisRatio=10,a.verticalMargin=a.height*a.axisRatio/100,a.horizontalMargin=a.width*a.axisRatio/100,a.axisColor="#1167b1",a.axisWidth=.75,a.fontRatio=3,a.fontFamily="times",a.fontStyle="normal",a.fontWeight="300",a.fontColor="#333",a.verticalFontSize=a.height*a.fontRatio/100,a.horizontalFontSize=a.width*a.fontRatio/100,a.guideLineColor="#333",a.guideLineWidth=.5},Barchart.prototype.performPreOperations=function(){const a=this;a.createCanvas(),a.handleData(),a.preapareData()},Barchart.prototype.createCanvas=function(){this},Barchart.prototype.createCanvas=function(){const a=this;let b=document.createElement("canvas");b.id=a.id+"-"+Math.random(),b.width=a.width,b.height=a.height,document.getElementById(a.id).innerHTML="",document.getElementById(a.id).appendChild(b),a.canvas=b,a.context=b.getContext("2d")},Barchart.prototype.handleData=function(){const a=this;a.labels=[],a.values=[],a.data.forEach(b=>{a.labels.push(b.label),a.values.push(b.value)})},Barchart.prototype.preapareData=function(){const a=this;a.itemsNum=a.data.length,a.maxVal=Math.max.apply(null,a.values),a.minVal=Math.min.apply(null,a.values),a.verticalAxisWidth=a.height-2*a.verticalMargin,a.horizontalAxisWidth=a.width-2*a.horizontalMargin,a.verticalUpperBound=10*Math.ceil(a.maxVal/10),a.verticalLabelFreq=a.verticalUpperBound/a.itemsNum,a.horizontalLabaelFreq=a.horizontalAxisWidth/a.itemsNum},Barchart.prototype.drawChart=function(){const a=this;a.drawVerticalAxis(),a.drawVerticalLabel(),a.drawVerticalGuideLine(),a.drawHorizontalAxis(),a.drawHorizontalLabel(),a.drawHorizontalGuideLine(),a.drawBars()},Barchart.prototype.drawVerticalAxis=function(){const a=this;a.context.beginPath(),a.context.strokeStyle=a.axisColor,a.context.lineWidth=a.axisWidth,a.context.moveTo(a.horizontalMargin,a.verticalMargin),a.context.lineTo(a.horizontalMargin,a.height-a.verticalMargin),a.context.stroke()},Barchart.prototype.drawHorizontalAxis=function(){const a=this,b=`${a.fontStyle} ${a.fontWeight} ${a.verticalFontSize}px ${a.fontFamily}`;a.context.font=b,a.context.textAlign="center",a.context.textBaseline="top",a.context.fillStyle=a.fontColor;let c=0;do{let b=a.horizontalMargin+c*a.horizontalLabaelFreq+a.horizontalLabaelFreq/2,d=a.height-a.verticalMargin+a.verticalMargin/this.axisRatio;a.context.fillText(a.labels[c],b,d),c++}while(c<=a.itemsNum-1)},Barchart.prototype.drawVerticalLabel=function(){const a=this,b=`${a.fontStyle} ${a.fontWeight} ${a.verticalFontSize}px ${a.fontFamily}`;a.context.font=b,a.context.textAlign="right",a.context.fillStyle=a.fontColor;const c=a.verticalAxisWidth/a.verticalUpperBound*a.verticalLabelFreq;let d=0;do{let b=a.verticalUpperBound-d*a.verticalLabelFreq,e=a.horizontalMargin-a.horizontalMargin/a.axisRatio,f=a.verticalMargin+d*c;a.context.fillText(b,e,f),d++}while(d<=a.itemsNum)},Barchart.prototype.drawHorizontalLabel=function(){const a=this;a.context.beginPath(),a.context.strokeStyle=a.axisColor,a.context.lineWidth=a.axisWidth,a.context.moveTo(a.horizontalMargin,a.height-a.verticalMargin),a.context.lineTo(a.width-a.horizontalMargin,a.height-a.verticalMargin),a.context.stroke()},Barchart.prototype.drawHorizontalGuideLine=function(){const a=this;a.context.strokeStyle=a.guideLineColor,a.context.lineWidth=a.guideLineWidth;const b=a.verticalAxisWidth/a.verticalUpperBound*a.verticalLabelFreq;let c=0;do{let d=a.horizontalMargin,e=a.verticalMargin+c*b,f=a.horizontalMargin+a.horizontalAxisWidth,g=a.verticalMargin+c*b;a.context.beginPath(),a.context.moveTo(d,e),a.context.lineTo(f,g),a.context.stroke(),c++}while(c<=a.itemsNum)},Barchart.prototype.drawVerticalGuideLine=function(){const a=this;a.context.strokeStyle=a.guideLineColor,a.context.lineWidth=a.guideLineWidth;let b=0;do{let c=a.horizontalMargin+b*a.horizontalLabaelFreq,d=a.height-a.verticalMargin,e=a.horizontalMargin+b*a.horizontalLabaelFreq,f=a.verticalMargin;a.context.beginPath(),a.context.moveTo(c,d),a.context.lineTo(e,f),a.context.stroke(),b++}while(b<=a.itemsNum)},Barchart.prototype.drawBars=function(){const a=this;let b=0;do{const c=a.createRnadomRGBColor(),d=`rgba(${c.r},${c.g},${c.b},${"0.3"})`,e=`rgba(${c.r},${c.g},${c.b})`;a.context.beginPath();const f=a.horizontalMargin+b*a.horizontalLabaelFreq+a.horizontalLabaelFreq/a.axisRatio,g=a.height-a.verticalMargin,h=a.horizontalLabaelFreq-2*a.horizontalLabaelFreq/a.axisRatio,i=-1*a.verticalAxisWidth*a.values[b]/a.maxVal;a.context.fillStyle=d,a.context.strokeStyle=e,a.context.rect(f,g,h,i),a.context.stroke(),a.context.fill(),b++}while(b<=a.itemsNum)},Barchart.prototype.createRnadomRGBColor=function(){const a=getRandomInt(0,257),b=getRandomInt(0,257),c=getRandomInt(0,257);return{r:a,g:b,b:c}};function getRandomInt(a,b){return a=Math.ceil(a),b=Math.floor(b),Math.floor(Math.random()*(b-a))+a}